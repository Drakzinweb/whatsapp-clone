<!DOCTYPE html>
<html lang="pt-BR">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title>Registrar</title><link rel="stylesheet" href="css/style.css"/></head>
<body>
  <div class="form-container">
    <h2>Registrar</h2>
    <form id="registerForm">
      <input id="username" placeholder="Usuário" required />
      <input id="password" type="password" placeholder="Senha" required />
      <button>Registrar</button>
    </form>
    <p>Já tem conta? <a href="login.html">Entrar</a></p>
  </div>
  <script>
    const API = '';
    document.getElementById('registerForm').onsubmit = async e=>{
      e.preventDefault();
      const res = await fetch(`${API}/api/auth/register`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({username:e.target.username.value,password:e.target.password.value})
      });
      if(!res.ok){alert((await res.json()).message);return;}
      localStorage.setItem('token',(await res.json()).token);
      location.href='chat.html';
    }
  </script>
</body>
</html>
